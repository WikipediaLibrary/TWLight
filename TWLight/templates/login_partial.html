{% load static %}
{% load i18n %}
{% load l10n %}
{% load cache %}
{% get_current_language as LANGUAGE_CODE %}

<div class="homepage-topbar">
  <div class="topbar-logo">
    <img class="logo" src="{% static 'img/Wikipedia_Library_owl.svg' %}" alt="{% trans 'The Wikipedia Library' %}">
    <span class="topbar-title">{% trans "The Wikipedia Library" %}</span>
  </div>

  <form class="topbar-search" method="get" action="/">
    <input type="search" name="q" class="topbar-search-input" placeholder="{% trans 'Search the library' %}" aria-label="{% trans 'Search the library' %}">
    <button type="submit" class="btn topbar-search-btn">{% trans "Search" %}</button>
  </form>

  <div class="topbar-actions">
    <form class="form-inline" action="/i18n/setlang/?next=/" method="post">
      {% csrf_token %}
      {% if form_show_errors %}
        {% include "bootstrap4/errors.html" %}
      {% endif %}
      <div class="dropdown">
        <button class="btn dropdown-toggle language-select" type="button" id="language-dropdown-1" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                  {% for code, name in LANGUAGES %}
                    {% if code == LANGUAGE_CODE %}
                      {{ name }}
                    {% endif %}
                  {% endfor %}
        </button>
        <div class="dropdown-menu" aria-labelledby="language-dropdown-1">
          {% for code, name in LANGUAGES %}
            <button name="language" class="dropdown-item language-select-menu" value={{code}} type="submit">{{name}}</button>
          {% endfor %}
        </div>
      </div>
    </form>
    <a class="topbar-login" href="{% url 'oauth_login' %}?next={{ next_url }}&from_homepage=true">{% trans "Log in" %}</a>
  </div>
</div>

{% if messages %}
  {% for message in messages %}
    <div class="alert alert-success text-center w-75 mr-auto ml-auto" role="alert">
      {{ message }}
    </div>
  {% endfor %}
{% endif %}

<div class="hero-section">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-7 col-md-12">
        <h1 class="hero-title">
          {% comment %}Translators: Main heading on homepage.{% endcomment %}
          {% trans "Access to reliable sources for Wikipedia editors" %}
        </h1>
        <p class="hero-subtitle">
          {% comment %}Translators: Subheading describing available collections.{% endcomment %}
          {% blocktranslate trimmed %}
          Over 90 of the world's top subscription-only databases, with content in 34 languages, free for Wikipedians of all backgrounds.
          {% endblocktranslate %}
        </p>
        <div class="hero-login mt-4">
          {% comment %}Translators: Button that logs editors in to access resources.{% endcomment %}
          <a class="btn btn-lg btn-primary hero-login-button" href="{% url 'oauth_login' %}?next={{ next_url }}&from_homepage=true">
            {% trans "Log in to access" %}
          </a>
        </div>
      </div>
      <div class="col-lg-5 col-md-12 hero-criteria">
        <div class="criteria-card">
          <p class="criteria-title">
            {% blocktranslate trimmed %}Meet these criteria for automatic access{% endblocktranslate %}
            <i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" data-placement="bottom"
               data-html="true" title="{% trans 'These criteria grant you access to certain collections but not all. Some collections are accessible on a per application basis only.' %}"></i>
          </p>
          <ul class="criteria-list">
            {% for criteria in bundle_criteria %}
              <li class="criteria-item"><i class="fa fa-check"></i>{{ criteria }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
